---
- name: Provisioning of the raspberry pi 4 server
  hosts: pi
  become: yes
  gather_facts: yes
  roles:
    - role: device_init
      tags: [ device_init, init ]

    - role: starship
      tags: [ starship, init ]

    - role: systemd_timesyncd
      tags: [ systemd_timesyncd, init ]

    - role: firewalld
      tags: [ firewalld, init ]

    - role: prometheus_node_exporter
      tags: [ prometheus_node_exporter, monitoring ]

    - role: promtail
      tags: [ promtail, monitoring ]

    - role: nfs_share
      tags: [ nfs_share, podman_all ]

    - role: podman/podman
      tags: [ podman/podman, podman_all ]

    - role: podman/podman_adguard
      tags: [ podman_adguard, podman_all ]

    - role: podman/podman_transmission
      tags: [ podman_transmission, podman_all ]

    - role: podman/podman_prometheus
      tags: [ podman_prometheus, podman_all ]

    - role: podman/podman_grafana
      tags: [ podman_grafana, podman_all ]

    - role: podman/podman_homeassistant
      tags: [ podman_homeassistant, podman_all ]

    - role: podman/podman_syncthing
      tags: [ podman_syncthing, podman_all ]

    - role: podman/podman_flame
      tags: [ podman_flame, podman_all ]

    - role: podman/podman_loki
      tags: [ podman_loki, podman_all ]
    
    - role: podman/podman_pyload
      tags: [ podman_pyload, podman_all ]

    - role: haproxy
      tags: [ haproxy, podman_all ]
