---
- name: Provisioning of the main Debian router
  hosts: router
  become: yes
  gather_facts: yes
  roles:
    - role: device_init
      tags: [ device_init, init ]

    - role: fstrim
      tags: [ fstrim, init ]

    - role: interfaces
      tags: [ interfaces, init ]

    - role: sysctl
      tags: [ sysctl, init ]

    - role: vnstat
      tags: [ vnstat, init, monitoring ]

    - role: starship
      tags: [ starship, init ]

    - role: frr
      tags: [ frr, services ]

    - role: isc_kea
      tags: [ isc_kea, services ]

    - role: coredns
      tags: [ coredns, services ]

    - role: wireguard
      tags: [ wireguard, services ]

    - role: ntpd
      tags: [ ntpd, services ]

    # - role: stork_agent
    #   tags: [ stork_agent, monitoring ]

    - role: node_exporter
      tags: [ node_exporter, monitoring ]

    - role: promtail
      tags: [ promtail, monitoring ]

    - role: gad
      tags: [ gad, services ]

    - role: is_alive
      tags: [ is_alive, services ]

    - role: sshguard
      tags: [ sshguard, services ]

    - role: nftables
      tags: [ nftables, services ]
