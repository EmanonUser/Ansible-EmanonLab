---
# Ansible-Emanonlab, variables conventions
# snake_case
# prefix define origin
  # host_
  # grp_
  # host_vault_
  # grp_vault_

# All variables must follow those path: 
##  host_vars/*/vault.yml --> host_vars/*/all.yml --> roles/*/default/main.yml  ##          Secret host variables
##  group_vars/*/vault.yml --> group_vars/*/all.yml --> roles/*/default/main.yml  ##        Secret group variables
##  host_vars/*/all.yml --> roles/*/default/main.yml  ##                                    Standards host variables
##  group_vars/*/all.yml --> roles/*/default/main.yml  ##                                   Standards group variables

# If a variables is used in multiples roles at the same time the prefix will be host_Origin-role_role_ and will be defined only on the origin role
# Variables that do not belong to a role will be placed in the Roleless section
# Add comment to external variables, variables that depend a third party apt gpg key etc
# Verbose is cool, use verbose names even when it become extra long

## Roleless ##
host_primary_user_username: "{{ host_vault_primary_user_username }}"
host_primary_user_password: "{{ host_vault_primary_user_password }}"
host_roleless_cpu_architecture: amd64 # amd64, arm64 etc ...
## Roleless ##

## device_init ##
host_device_init_use_starship: no
host_device_init_debian_stable_packages:
  - debian-keyring
  - debian-archive-keyring
  - ca-certificates
  - apt-transport-https
  - dnsutils
  - ldnsutils
  - conntrack
  - git
  - msmtp
  - tcpdump
  - zsh
  - socat
  - mtr-tiny
  - acl
  - neovim
## device_init ##

## interfaces ##
host_interfaces_lacp_interface: bond0
## interfaces ##

## frr ##
host_frr_version: frr-8  ## https://deb.frrouting.org/
host_frr_daemons:
  - bgpd=no
  - ospfd=yes
  - ospf6d=no
  - ripd=no
  - ripngd=no
  - isisd=no
  - pimd=no
  - ldpd=no
  - nhrpd=no
  - eigrpd=no
  - babeld=no
  - sharpd=no
  - pbrd=no
  - bfdd=no
  - fabricd=no
  - vrrpd=no
## frr ##

## isc_kea ##
host_isc_kea_version: kea-2-0  ## https://cloudsmith.io/~isc/repos/
host_isc_kea_cloudsmith_gpg_key: gpg.8029D4AFA58CBB5E.key ## For kea-1-9 https://cloudsmith.io/~isc/repos/kea-1-9/signing/
## isc_kea ##

## wireguard ##
host_wireguard_interface_name: wg0
host_wireguard_subnet: "172.16.0"
host_wireguard_server_port: 51820
host_wireguard_server_address: "{{ host_wireguard_subnet }}.1/24"
host_wireguard_server_private_key: "{{ host_vault_wireguard_server_private_key }}"
host_wireguard_server_public_key: "{{ host_vault_wireguard_server_public_key }}"
host_wireguard_peers:
  Arch:
    private_key: "{{ host_vault_peer1_private_key }}"
    public_key: "{{ host_vault_peer1_public_key }}"
    preshared_key: "{{ host_vault_peer1_preshared_key }}"
    ip_address: "{{ host_wireguard_subnet }}.2/32"

  One:
    private_key: "{{ host_vault_peer2_private_key }}"
    public_key: "{{ host_vault_peer2_public_key }}"
    preshared_key: "{{ host_vault_peer2_preshared_key }}"
    ip_address: "{{ host_wireguard_subnet }}.3/32"
  
  W10:
    private_key: "{{ host_vault_peer3_private_key }}"
    public_key: "{{ host_vault_peer3_public_key }}"
    preshared_key: "{{ host_vault_peer3_preshared_key }}"
    ip_address: "{{ host_wireguard_subnet }}.4/32"
## wireguard ##

## prometheus_node_exporter ##
host_prometheus_node_exporter_cpu_architecture: "{{ host_roleless_cpu_architecture }}"
host_prometheus_node_exporter_download_url: https://github.com/prometheus/node_exporter/releases/download/
host_prometheus_node_exporter_version: 1.1.2 # https://github.com/prometheus/node_exporter/releases/
## prometheus_node_exporter ##

## ntpd ##
host_ntpd_interfaces_ip: ["127.0.0.1", "{{ grp_device.router.ipv4_addr }}"]
host_ntpd_upstream_server: 
  - 0.debian.pool.ntp.org
  - pool.ntp.org
  - ntp.midway.ovh
## ntpd ##

## coredns ##
host_coredns_cpu_architecture: "{{ host_roleless_cpu_architecture }}"
host_coreDNS_path: /opt/coredns
host_coreDNS_version: "1.8.4"
host_coreDNS_port: "53"
host_coreDNS_prometheus_port: "9353"
host_coreDNS_forwardto: "{{ grp_device.pi.ipv4_addr }}"
host_coreDNS_docker_local_subdomain:
  - adguard
  - prometheus
  - grafana
  - transmission
  - haproxy
  - homeassistant
## coredns ##

## gad ##
host_gad_path: /opt
host_gad_version: "1.4.2"
host_gad_use_ipv6: no
## gad ##

## isAlive ##
host_is_alive_echo_request_target: lain.emanon.moe
host_is_alive_echo_request_interval: 15m
host_is_alive_echo_request_count: "21" 
## isAlive ##

## nftables ##
host_nftables_wireguard_interface_name: "{{ host_wireguard_interface_name }}"
host_nftables_wireguard_subnet: "{{ host_wireguard_subnet }}"
host_nftables_wireguard_server_port: "{{ host_wireguard_server_port }}"
host_nftables_is_alive_echo_request_count: "{{ host_is_alive_echo_request_count }}"
## nftables ##