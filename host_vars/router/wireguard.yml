---
wireguard_confs:

  - wireguard: wg0
    udp_port: 51820
    server_addresses:
      - 172.16.0.1/24
      - 2a06:a003:50ca:6::1/64
    server_public_key: "Bdh/0sldvQAiX8tr3IEr95g0cemojFmMDrdrrgTnfg8=" # Not used but kept here
    server_private_key: "{{ wg0.private_key }}"
    peers:
      - peer: arch
        public_key: "SX6OgjapX+UUaPYqrKaS1DYYJkN4dPf5r59woJVzgUs=" # Not used but kept here
        private_key: "{{ wg0.peers | selectattr('peer', 'equalto', 'arch') | map(attribute='private_key') | first }}"
        preshared_key: "{{ wg0.peers | selectattr('peer', 'equalto', 'arch') | map(attribute='preshared_key') | first }}"
        allowed_ips:
          - "172.16.0.2/32"
          - 2a06:a003:50ca:6::2/64

      - peer: one
        public_key: "+1g4W6PQiL8FhV5dsZ2ZsA8alM+79T2WRxE1bSHrzmk=" # Not used but kept here
        private_key: "{{ wg0.peers | selectattr('peer', 'equalto', 'one') | map(attribute='private_key') | first }}"
        preshared_key: "{{ wg0.peers | selectattr('peer', 'equalto', 'one') | map(attribute='preshared_key') | first }}"
        allowed_ips:
          - 172.16.0.3/32
          - 2a06:a003:50ca:6::3/128

      - peer: windows
        public_key: "QauWBp+kMfQ2UK3EyB3tcRH3XMKS8cirrX2PtuseLTY=" # Not used but kept here
        private_key: "{{ wg0.peers | selectattr('peer', 'equalto', 'windows') | map(attribute='preshared_key') | first }}"
        preshared_key: "{{ wg0.peers | selectattr('peer', 'equalto', 'windows') | map(attribute='preshared_key') | first }}"
        allowed_ips:
          - 172.16.0.4/32
          - 2a06:a003:50ca:6::4/128

  - wireguard: wg48
    udp_port: 51821
    server_addresses:
      - 2a06:a003:50ca::2/48
    server_private_key: "{{ wg48.private_key }}"
    peers:
      - peer: route48
        public_key: W0pI832mL5u7JzJjiE68dyS95mIGBDqGgSxSZromEGY= # Not used but kept here
        endpoint: 194.50.19.11:51949
        allowed_ips:
          - ::/1
          - 8000::/1
