name: Ansible Lint  # feel free to pick your own name

on: [push, pull_request]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    # Important: This sets up your GITHUB_WORKSPACE environment variable
    - uses: actions/checkout@v2

    - name: Lint Ansible Playbook
      # replace "master" with any valid ref
      uses: ansible/ansible-lint-action@master
      with:
        target: |
          ./roles/interfaces/defaults/main.yml
          ./roles/interfaces/tasks/main.yml
          ./roles/interfaces/handlers/main.yml
          ./roles/frr/defaults/main.yml
          ./roles/frr/tasks/main.yml
          ./roles/frr/handlers/main.yml
          ./roles/ntpd/defaults/main.yml
          ./roles/ntpd/tasks/main.yml
          ./roles/ntpd/handlers/main.yml
          ./roles/router_init/defaults/main.yml
          ./roles/router_init/tasks/main.yml
          ./roles/wireguard/defaults/main.yml
          ./roles/wireguard/tasks/main.yml
          ./roles/wireguard/handlers/main.yml
          ./roles/gad/defaults/main.yml
          ./roles/gad/tasks/main.yml
          ./roles/gad/handlers/main.yml
          ./roles/router_packages/defaults/main.yml
          ./roles/router_packages/tasks/main.yml
          ./roles/msmtp/defaults/main.yml
          ./roles/msmtp/tasks/main.yml
          ./roles/nftables/defaults/main.yml
          ./roles/nftables/tasks/main.yml
          ./roles/nftables/handlers/main.yml
          ./roles/unbound/defaults/main.yml
          ./roles/unbound/tasks/main.yml
          ./roles/unbound/handlers/main.yml
          ./roles/isc-kea/defaults/main.yml
          ./roles/isc-kea/tasks/main.yml
          ./roles/isc-kea/handlers/main.yml
          ./roles/restic/defaults/main.yml
          ./roles/restic/tasks/main.yml
          ./roles/restic/handlers/main.yml
          ./roles/sshguard/tasks/main.yml
          ./roles/sshguard/handlers/main.yml
          ./deploy_router.yml
          ./install-packages.yml
          ./inventory.yml
          ./host_vars/router/vault.yml
          ./host_vars/router/router_global.yml
          ./host_vars/router/secrets.yml
