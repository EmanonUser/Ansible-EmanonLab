---
- name: Provisioning of the nas server
  hosts: nas
  become: yes
  gather_facts: yes
  roles:
    - role: device_init
      tags: [ device_init, init ]

    - role: fstrim
      tags: [ fstrim, init ]

    # - role: interfaces
    #   tags: [ interfaces, init ]    // systemd-networkd
    - role: dmz
      tags: [ dmz, init ]

    - role: firewalld
      tags: [ firewalld, init ]

    - role: systemd_timesyncd
      tags: [ systemd_timesyncd, init ]

    - role: vnstat
      tags: [ vnstat, init, monitoring ]

    - role: starship
      tags: [ starship, init ]

    - role: zfs
      tags: [ zfs, init ]

    - role: zrepl
      tags: [ zrepl, init ]

    - role: nfsd
      tags: [ nfsd, init ]

    - role: tgtd
      tags: [ tgtd, service ]

    - role: smbd
      tags: [ smbd, service ]

    - role: takina
      tags: [ takina, service ]

    - role: acme_dns
      tags: [ acme_dns, service ]

    - role: haproxy
      tags: [ haproxy, ct ]

    - role: podman/podman
      tags: [ podman, ct ]

    - role: podman/prometheus
      tags: [ prometheus, ct ]

    - role: podman/grafana
      tags: [ grafana, ct ]

    - role: podman/adguard
      tags: [ adguard, ct ]

    - role: podman/syncthing
      tags: [ syncthing, ct ]

    - role: podman/transmission
      tags: [ transmission, ct ]

    - role: podman/homeassistant
      tags: [ homeassistant, ct ]

    - role: podman/jellyfin
      tags: [ jellyfin, ct ]

    # - role: podman/minecraft
    #   tags: [ minecraft, ct ]