---
- name: Install firewalld
  ansible.builtin.apt:
    name: [ 'firewalld', 'python3-firewall' ]
    state: present
  notify: Enable & Restart firewalld service

- name: Add primary interface to firewalld home zone
  ansible.posix.firewalld:
    interface: "{{ firewalld_primary_interface }}"
    zone: "{{ firewalld_zone }}"
    permanent: yes
    state: enabled
    immediate: yes

- name: Open firewalld ssh port
  ansible.posix.firewalld:
    zone: "{{ firewalld_zone }}"
    service: ssh
    permanent: yes
    state: enabled
    immediate: yes