[Unit]
Description=Node Exporter
Wants=network-online.target
After=network-online.target

[Service]
User=node_exporter
Group=node_exporter
Restart=on-failure
ExecStart=/opt/prometheus/node_exporter-{{ prometheus_node_exporter_version }}.linux-{{ prometheus_node_exporter_cpu_architecture }}/node_exporter \
        --no-collector.rapl --collector.systemd --collector.processes --web.listen-address="{{ prometheus_node_exporter_interface_address }}:{{ prometheus_node_exporter_port }}"
ExecReload=/bin/kill -HUP $MAINPID
NoNewPrivileges=true
ProtectHome=read-only
ProtectSystem=strict

[Install]
WantedBy=multi-user.target