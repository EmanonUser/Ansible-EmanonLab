---
adguard_image: "{{ host_adguard_image | default('docker.io/adguard/adguardhome') }}"
adguard_image_version: "{{ host_adguard_image_version | default('latest') }}"
# https://hub.docker.com/r/adguard/adguardhome/tags

adguard_config: "{{ http_services | selectattr('service', 'equalto', 'adguard') | first }}"
adguard_ports:
  - "{% if adguard_config.direct_access %}[::]:{{ adguard_config.port }}{% else %}127.0.0.1:{{ adguard_config.port }}{% endif %}:3000/tcp"
  - "{% if adguard_config.direct_access %}[::]:{{ adguard_config.port }}{% else %}[::1]:{{ adguard_config.port }}{% endif %}:3000/tcp"
  - "5353:53/udp"
  - "5353:53/tcp"

adguard_directories:
  - "{{ podman_volumes_path }}/adguard/work"
  - "{{ podman_volumes_path }}/adguard/conf"
adguard_default_volumes:
  - "{{ podman_volumes_path }}/adguard/work:/opt/adguardhome/work"
  - "{{ podman_volumes_path }}/adguard/conf:/opt/adguardhome/conf"
adguard_volumes: "{{ host_adguard_default_volumes | default(adguard_default_volumes) }}"

# Firewalld
firewalld_zone: "{{ host_firewalld_zone | default('home') }}"
adguard_firewalld_ports:
  webui: "{{ adguard_config.port }}/tcp"
  dns_udp: "5353/udp"
  dns_tcp: "5353/tcp"
adguard_use_rich_firewalld_rules: "{{ host_adguard_use_rich_firewalld_rules | default(false) }}"
adguard_firewalld_rich_rules: "{{ host_adguard_firewalld_rich_rules }}"
