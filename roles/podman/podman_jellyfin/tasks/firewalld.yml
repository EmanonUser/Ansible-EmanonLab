---
- name: Open jellyfin firewalld ports
  ansible.posix.firewalld:
    zone: "{{ firewalld_zone }}"
    port: "{{ jellyfin_firewalld_ports }}"
    permanent: yes
    immediate: yes
    state: enabled
  when:
    - jellyfin_config.direct_access
    - jellyfin_firewalld_ports is defined

- name: Close jellyfin firewalld ports
  ansible.posix.firewalld:
    zone: "{{ firewalld_zone }}"
    port: "{{ jellyfin_firewalld_ports }}"
    permanent: yes
    immediate: yes
    state: disabled
  when:
    - not jellyfin_config.direct_access
    - jellyfin_firewalld_ports is defined